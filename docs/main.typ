#let fonts = (
  mono: "IBM Plex Mono",
  mono-bold: "IBM Plex Mono SmBld",
  serif: "IBM Plex Serif",
  sans: "IBM Plex Sans",
  sans-bold: "IBM Plex Sans SmBld",
  math: "IBM Plex Math",
  cjk-serif: "Source Han Serif",
  cjk-sans: "Sarasa UI SC",
)

#show math.equation: set text(font: (fonts.math, fonts.serif, fonts.cjk-serif))

#show raw: set text(
  font: (fonts.mono, fonts.sans, fonts.cjk-sans),
  slashed-zero: true,
  ligatures: false,
  features: (ss02: 1, ss06: 1),
)

#set text(
  lang: "zh",
  font: (fonts.serif, fonts.cjk-serif),
)

#set page(
  paper: "a4",
  margin: (x: 2.5cm, y: 2.5cm),
)

#align(center)[
  #block(
    width: 100%,
    inset: 10pt,
    fill: luma(240),
    radius: 4pt,
  )[
    #text(size: 24pt, weight: "bold")[模拟宇宙：时空舞台]
    #v(1em)
    #text(size: 16pt)[游戏设计文档]
  ]
]

#v(2em)

- *游戏名称：*模拟宇宙：时空舞台
- *游戏类型：*4 维 Roguelite 弹幕射击游戏

#pagebreak()

#outline(
  title: [目录],
  depth: 2,
)

#pagebreak()

= 主题解读：「与世界共舞」

「与世界共舞」这一主题，引导我们思考玩家与游戏世界之间互动的本质．传统的游戏设计常常将世界塑造成一个静态的、充满敌意的环境，玩家的目标是征服或摧毁它．然而，「共舞」一词则暗示了一种更为和谐、动态且充满韵律感的关系．它不是对抗，而是同步；不是毁灭，而是驾驭．我们的作品《模拟宇宙：时空舞台》正是基于这一理念，将「世界」与「共舞」的概念解构并重塑，构建了一个以「时间」为核心的独特互动体验．

== 何为「世界」：以时间为轴的舞台

在我们看来，游戏中的「世界」并不仅仅是地图、敌人和场景的美术集合，它更是一个由严谨规则构成的、动态演化的系统．在弹幕射击游戏中，这个「世界」最核心的体现，便是那铺天盖地、遵循确定性规律运动的弹幕本身．每一颗子弹的轨迹、速度和生成时机，共同构成了一部复杂而精准的「时空乐谱」．这个世界是充满挑战的，但它并非混沌无序．它的每一次脉动、每一次攻击，都遵循着可被观察、学习和预测的内在逻辑．

我们将这一概念与游戏背景「拍摄战斗戏」相结合．在这个设定下，「世界」即是「舞台」，敌人和弹幕则是预设好的「剧本」与「编舞」．玩家作为舞台上的主角，其使命并非摧毁舞台，而是在这个精心编排的剧本中，上演一场精彩绝伦的表演．这个「世界」因此变得更具艺术性和目的性：它既是玩家的对手，也是玩家的舞伴，它的存在是为了激发玩家展现出最华丽的舞姿．

== 何为「共舞」：驾驭时间，编织属于自己的旋律

如果说弹幕构成的「世界」是固定的乐谱，那么玩家的「共舞」便是基于这首乐谱的即兴演绎．我们从三个维度来诠释「共舞」的内涵：

=== 空间的舞蹈：闪避与穿行

这是最直观的舞蹈形式，也是弹幕射击游戏的基础．玩家操控角色在弹幕的缝隙中穿梭，寻找安全的路径．这本身就是一场高精度的空间舞蹈．我们通过流畅的 3C（Character, Camera, Control）设计，确保玩家能够精准地执行每一个舞步．

然而，我们不止于此．游戏引入了「擦弹（Graze）」机制，当玩家贴近子弹边缘时，不仅不会受伤，反而会获得「时间碎片」作为奖励．这鼓励玩家从被动闪避转为主动迎击，去挑战极限，去与危险共舞．每一次成功的擦弹，都像是舞者完成一个高难度动作，既惊险又优美，将玩家与弹幕世界的关系从「躲避」升华为「互动」．

=== 时间的舞蹈：减速与回溯

这是我们对「共舞」最核心、最深刻的诠释．传统游戏中，时间是单向流逝的铁律，玩家只能被动接受．但在《模拟宇宙：时空舞台》中，时间轴本身成为了玩家可以掌控的第四维度，是舞蹈中最重要的节拍器．

- *减速（子弹时间）：* 玩家可以主动减缓时间的流速．这不仅仅是一个降低难度的「新手模式」，更是一种战术选择．在密集的弹幕中开启子弹时间，如同舞者在快节奏的乐章中突然进入一段慢板独舞，每一个细节都被放大，玩家得以从容地规划路径，欣赏弹幕构成的几何美学，并精准地予以反击．这是玩家主动改变舞蹈的节奏，引领舞伴（世界）进入自己的步调．

- *回溯（倒带）：* 游戏将玩家的生命值定义为「镜时」，即拍摄时长．一旦失误（被击中），并非传统意义上的「死亡」，而是会自动触发时间回溯，将整个世界的状态倒回至几秒之前，给予玩家一次修正失误、重跳舞步的机会．拥有特定奇物后，玩家甚至可以主动进行回溯．这彻底颠覆了传统 STG 中一触即死的惩罚机制，将「失败」重新定义为舞蹈中的一个「踉跄」．玩家不再是恐惧失误，而是学会如何从失误中学习，如何通过回溯来完善自己的表演，最终完成一镜到底的「完美演出」．

通过赋予玩家操纵时间的能力，我们让「共舞」从单纯的空间互动，扩展到了对世界基本规则——时间流——的掌控．玩家不再是时间的囚徒，而是时间的编舞者．

=== 策略的舞蹈：选择与成长

Roguelite 元素的融入，为这场舞蹈增添了更深层次的策略性．每一次游戏都是一场全新的演出，玩家需要在非线性的六边形地图上选择自己的路径．是挑战高难度的战斗关卡以获取丰厚回报，还是进入商店、事件房间寻求未知的机遇？每一次选择，都在为后续的舞蹈编排不同的章节．

游戏中丰富的强化（Upgrades）和奇物（Curios）系统，则允许玩家定制自己的「舞风」．是成为暴力输出的「战神」，还是灵动飘逸的「舞者」？玩家通过在每一关结束后的选择，不断构筑自己的能力，让舞蹈风格愈发鲜明．这种带有积累和成长的策略选择，使得每一局游戏中的「共舞」都独一无二，充满了探索和重玩的价值．

综上所述，《模拟宇宙：时空舞台》通过将「世界」定义为一个以时间为轴的舞台，并将「共舞」诠释为玩家在空间、时间、策略三个维度上与这个世界的主动交互与驾驭，深刻地回应了「与世界共舞」这一主题．我们创造的不是一个等待被征服的世界，而是一个等待被理解、被共鸣、被演绎的舞台．玩家的最终目标，是在枪林弹雨的交响乐中，与时间共舞，上演一场属于自己的、酣畅淋漓的英雄史诗．

#pagebreak()

= 系统创意与完成度

相较于传统的 STG（弹幕射击游戏），《模拟宇宙：时空舞台》在核心玩法、游戏结构和系统深度上进行了大胆的创新与融合，旨在为玩家提供前所未有的游戏体验．同时，我们在有限的时间内近可能完成了较高的完成度．

== 创意设计：从二维平面到四维时空

我们从三个层面突破了传统 STG 的框架，构建了一个多维度、高自由度的游戏系统．

=== 维度的突破：引入 Z 轴的立体弹幕空间

传统 STG 的战场局限于一个二维平面．我们保留了玩家在 XY 平面上的核心移动与操作，但将整个战斗空间扩展到了三维．

- *3D 化的弹幕与环境：* 游戏中的大量子弹（如 `FallingBullet`, `PhaseWaveBullet` 等）和敌人行为（如 `SimpleEnemy5` 的跳跃攻击）都引入了 Z 轴（高度）的概念．子弹不再是简单的平面图形，而是拥有真实高度的 3D 物体．它们会从空中落下、在不同高度穿行，为战场增加了垂直层面的威胁．
- *全新的交互维度：* 为了应对来自 Z 轴的威胁，我们为玩家设计了相应的交互机制．例如，`ZAxisEnhancementCurio` 奇物允许玩家进行短暂的跳跃，在 Z 轴上规避地面弹幕，实现了真正意义上的三维空间闪避．同时，所有具有高度的子弹都配有精准的「落地指示器」，为玩家提供了清晰的视觉预警，将 Z 轴信息直观地呈现在二维操作平面上，这既增加了游戏的深度，又保证了操作的直观性．

=== 结构的突破：融合 Roguelite 的非线性探索

我们彻底摒弃了传统 STG 的线性关卡推进模式，引入了成熟的 Roguelite 框架，极大地提升了游戏的可重玩性和策略深度．

- *非线性地图（HexMap）：* 游戏采用六边形蜂巢地图结构．每一层（位面）地图都由随机生成的节点构成，玩家在完成一个节点后，可以从多个后续路径中自由选择，规划自己的探索路线．
- *多样化的房间类型：* 地图节点不再是单一的战斗，而是包含了 5 种功能各异的房间：
  - *战斗（Combat）：* 核心玩法所在，挑战随机生成的敌人波次，赢取奖励．
  - *商店（Shop）：* 消耗「时间债券」购买强大的强化，进行构筑交易．
  - *交换器（Transmuter）：* 允许玩家将已有的低级强化合成为高级强化，提供了策略性的资源转化途径．
  - *事件（Event）：* 触发随机叙事事件，玩家的选择将带来奖励、惩罚或意想不到的后果．
  - *首领（Boss）：* 每个位面的终点，挑战强大的 Boss，进入下一位面．
- *丰富的成长体系：* 玩家在探索过程中可以获得两大类成长要素：
  - *强化（Upgrades）：* 超过 30 种不同等级的被动能力提升，构成了游戏构筑（Build）的核心．
  - *奇物（Curios）：* 7 种拥有强大主动或被动效果的特殊道具，提供了改变核心玩法的可能性．
- *动态难度机制：* 游戏引入了 4 种初始难度（Easy、Normal、Hard、Lunatic）．在游戏进程中，每通过一个关卡，整体难度系数都会动态提升，确保游戏后期始终充满挑战．

=== 核心的突破：时间轴成为可操纵的第四维度

本作最大的创新，在于将「时间」从一个不可撼动的背景变量，提升为玩家可以完全掌控的核心游戏维度，使游戏成为一个广义上的 4D 游戏．整个游戏的所有机制都围绕「时间」这一核心概念构建．

- *时间即一切：*
  - *生命是时间：* 玩家的生命值被称为「镜时」，在战斗中会随时间流逝而减少，被击中则会触发自动回溯．
  - *资源是时间：* 击败敌人和擦弹会掉落「时间碎片」，用于补充镜时．商店交易、事件消耗的也都是「时间债券」．
  - *玩法是时间：* 游戏的核心操作——「子弹时间」和「时间回溯」——都是对时间轴的直接操控．
- *完全可回溯的系统（RewindManager）：* 我们实现了一套强大而高效的时间回溯系统．它以固定的帧率记录游戏中所有可回溯对象（`IRewindable`）的状态快照．这不仅仅是玩家位置的回溯，而是整个游戏世界——包括每一个敌人、每一颗子弹、所有掉落物、乃至 Boss 的攻击阶段——的完整状态回滚．当玩家被击中时，系统会自动回溯，让玩家从失误中「复活」．当玩家获得「T 轴强化」奇物后，更可以随时主动预览并执行回溯操作．这使得时间不再是线性的，而是一个可以来回穿梭的维度，为玩家提供了前所未有的容错空间和战术可能性．

== 内容完成度：远超预期的体量与细节

我们深知，好的创意需要扎实的内容来填充．为此，我们投入了大量精力来构建一个内容丰富、细节完善的游戏世界，其完成度达到了商业化独立游戏的标准．

- *敌人设计：* 游戏包含 *9 种* 设计各异的普通敌人和 *9 个* 风格迥然的 Boss 战斗阶段．每种敌人和 Boss 阶段都拥有独特的攻击模式和行为逻辑，从发射 DNA 双螺旋弹幕的 `Dna`，到在战场上跃动并洒下弹幕雨的 `Drummer`，再到构建复杂几何迷宫的 `PhaseMaze` Boss 阶段，为玩家提供了多样且充满挑战的战斗体验．
- *Roguelite 内容：*
  - *事件：* 我们设计了多达 *15 种* 独特的随机事件，每个事件都有不同的抉择和后果，极大地丰富了战斗之外的游戏体验．
  - *强化与奇物：* 游戏内置了超过 *30 种* 不同等级的强化和 *7 种* 效果强大的奇物，为玩家提供了海量的构筑可能性和策略组合．
- *系统完善度：*
  - *地图与房间：* 完整的 5 种房间类型（战斗、商店、交换器、事件、首领）均已实现全部功能，构成了完整的 Roguelite 循环．
  - *难度梯度：* 提供了 4 种初始难度选项，配合游戏内的动态难度增长机制，满足了从新手到核心玩家的不同需求．

综上所述，《模拟宇宙：时空舞台》不仅在核心机制上对传统 STG 进行了颠覆性的创新，更以极高的完成度和丰富的内容体量构建了一个扎实、耐玩的游戏框架．我们相信，这款作品充分展现了我们对游戏设计的深刻理解和强大的技术实现能力．

#pagebreak()

= 游戏操作与机制说明

为了便于评委快速上手并深入体验游戏的核心乐趣，本章将详细介绍游戏的操作方式与各项核心机制．

== 游戏操作

游戏使用键盘操作，具体键位如下：

#align(
  center,
  table(
    columns: 2,
    stroke: .5pt,
    align: (center, center, left),
    [*功能*], [*键盘*],
    [移动], [方向键],
    [射击], [Z],
    [子弹时间], [Shift],
    [换弹], [A],
    [交互], [Enter],
    [使用奇物], [X],
    [切换奇物], [C],
    [暂停], [Escape],
    [菜单确认], [Enter],
    [菜单取消], [Escape],
    [菜单切换], [Tab],
    [菜单选择 Toggle（用于交换器等菜单的多选）], [Space],
  ),
)

== 核心机制详解

=== 镜时、时间碎片与时间债券

- *镜时 (Health)：* 游戏中的生命值，显示在屏幕左上角．在战斗关卡中，镜时会随着真实时间的流逝而缓慢减少．被敌人或子弹击中不会直接扣减镜时，而是会触发「自动时间回溯」．当镜时耗尽时，玩家会彻底死亡．
- *时间碎片 (Time Shard)：* 击败敌人或成功「擦弹」会掉落时间碎片．拾取后可以补充镜时．这是维持生存的主要手段．
- *时间债券 (Time Bond)：* 一种「时间债务」，显示在生命条右侧．当玩家拥有时间债券时，拾取的时间碎片会优先用于偿还债券，偿还完毕后才会补充镜时．时间债券主要通过商店购买、事件抉择等方式获得．

=== 擦弹 (Graze)

玩家角色周围有一个不可见的「擦弹判定圈」．当敌方子弹进入这个区域但未命中核心判定点时，即为一次成功的擦弹．
- *奖励：* 每次擦弹都会生成一个特殊的时间碎片，提供少量镜时奖励．
- *风险与收益：* 此机制鼓励玩家采取更激进的走位，贴近弹幕以获取更多资源，完美诠释了「与危险共舞」的设计理念．

=== 子弹时间 (Slow Time)

按住子弹时间键，游戏世界的时间流速会减慢（默认为 50%）．
- *战术优势：*
  - 给予玩家更多反应时间来躲避密集的弹幕．
  - 玩家的射击散布会减小，火力更加集中．
- *劣势：*
  - 玩家的时间流逝速度不会受到减速影响．
  - 部分 Boss 的攻击会免疫部分减速的影响．
- *使用时机：* 子弹时间没有消耗或冷却，玩家可以随时启用．这是一个纯粹的战术选择，考验玩家对战斗节奏的把握．

=== 时间回溯 (Time Rewind)

时间回溯是游戏的核心生存与策略机制．
- *自动回溯：* 当玩家被击中时，如果当前拥有足够的回溯时间存量（左上角显示），系统会自动将整个游戏世界的状态（包括玩家、敌人、所有子弹）倒回至被击中前的 3 秒．这是一次免于死亡的机会．
- *手动回溯：* 在获得「T 轴强化」奇物后，玩家可以按住奇物使用键来「预览」回溯过程，松开按键则确认回溯到预览的时间点．这使得回溯从一个被动保命技能，升格为强大的主动战术工具，例如用于解除糟糕的走位或重新挑战刚刚失败的攻击循环．

=== Roguelite 系统

- *六边形地图：* 在关卡间，玩家会进入地图界面．玩家只能从当前所在节点，移动到相邻的、更靠右侧的节点．你需要规划路线，以最优的方式抵达每个位面（Plane）的终点——首领节点．
- *强化 (Upgrades)：* 被动能力，分为 3 个等级．在完成战斗关卡或通过事件获得．它们是构筑（Build）的核心，效果可以叠加．
- *奇物 (Curios)：* 强大的特殊道具，分为主动和被动两类．主动类奇物提供一个可使用的技能（有冷却时间），被动类则提供常驻的特殊效果．玩家在游戏开始时可以从 3 个固定奇物种选择一个初始奇物，之后每通过一个位面的 Boss 挑战，都可以额外从 7 个奇物中以随机抽取 3 选 1 的方式获得奇物．

=== 关卡评分

在完成战斗关卡后，系统会根据玩家在本关的表现（是否被击中、是否使用技能、是否使用子弹时间）给予评分．
- *评分等级（从高到低）：*
  - *$bold(NN^3)$ (Perfect)：* 无伤、无技能、无慢动作．
  - *$bold(NN^2)$ (No Miss No Skill)：* 无伤、无技能．
  - *$bold(NN)$ (No Miss)：* 无伤．
  - *Standard Clear：* 普通通关．
- *奖励关联：* 评分越高，通关后获得的强化选择奖励也越好（例如，更高概率出现高级强化，或获得更多选择次数）．

#pagebreak()

= 网络资源备注

本项目在开发过程中使用了一些来自网络的公开美术资源，特此感谢原作者的贡献．所有资源均在符合其许可协议的范围内使用．

- *子弹像素美术资源:*
  + *来源:* itch.io
  + *作者:* BDragon1727
  + *链接:* #link("https://bdragon1727.itch.io/500-pixel-bullet-24x24")

- *图标美术资源:*
  + *来源:* itch.io
  + *作者:* Crusenho
  + *链接:* #link("https://crusenho.itch.io/icons-essential-pack-free-icons")

- *传送门像素美术资源:*
  + *来源:* itch.io
  + *作者:* f1xtach
  + *链接:* #link("https://f1xtach.itch.io/pixel-art-portal")
